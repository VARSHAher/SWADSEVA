{"ast":null,"code":"const fetchCart = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.get(\"http://localhost:5000/api/cart\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    setCart(response.data);\n    setLoading(false);\n  } catch (err) {\n    console.error(\"Error loading cart:\", err);\n    setLoading(false);\n  }\n};\nconst handleQuantityChange = async (itemId, change) => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    await axios.patch(\"http://localhost:5000/api/cart\", {\n      itemId,\n      quantity: change\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    // ... rest of your state update\n  } catch (error) {\n    var _error$response;\n    console.error(\"Error updating quantity:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    setMessage(\"Failed to update item quantity.\");\n  }\n};\nconst handleRemoveItem = async itemId => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    await axios.delete(`http://localhost:5000/api/cart/${itemId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    // ... rest of your state update\n  } catch (error) {\n    var _error$response2;\n    console.error(\"Error removing item:\", ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n    setMessage(\"Failed to remove item.\");\n  }\n};\nconst handleCheckout = async () => {\n  try {\n    if (!customerInfo.customerName || !customerInfo.customerAddress || !customerInfo.customerPhone) {\n      setMessage(\"Please fill out all the fields before proceeding to payment.\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    const orderToSave = {\n      customerName: customerInfo.customerName,\n      customerAddress: customerInfo.customerAddress,\n      customerPhone: customerInfo.customerPhone\n    };\n\n    // Create order (backend now pulls cart automatically)\n    await axios.post(\"http://localhost:5000/api/orders\", orderToSave, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n\n    // Clear cart\n    await axios.delete(\"http://localhost:5000/api/cart/clear\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    setCart({\n      items: [],\n      totalPrice: 0\n    });\n    setMessage(\"Payment successful! Redirecting to orders...\");\n    setCustomerInfo({\n      customerName: \"\",\n      customerAddress: \"\",\n      customerPhone: \"\"\n    });\n    setTimeout(() => navigate(\"/orders\"), 4000);\n  } catch (error) {\n    var _error$response3;\n    console.error(\"Error during checkout:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n    setMessage(\"Payment failed. Please try again.\");\n  }\n};","map":{"version":3,"names":["fetchCart","token","localStorage","getItem","response","axios","get","headers","Authorization","setCart","data","setLoading","err","console","error","handleQuantityChange","itemId","change","patch","quantity","_error$response","message","setMessage","handleRemoveItem","delete","_error$response2","handleCheckout","customerInfo","customerName","customerAddress","customerPhone","orderToSave","post","items","totalPrice","setCustomerInfo","setTimeout","navigate","_error$response3"],"sources":["C:/Users/VARSHA/Desktop/SWADSEVA/frontend/src/pages/ViewCart.js"],"sourcesContent":["const fetchCart = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.get(\"http://localhost:5000/api/cart\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    setCart(response.data);\r\n    setLoading(false);\r\n  } catch (err) {\r\n    console.error(\"Error loading cart:\", err);\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\nconst handleQuantityChange = async (itemId, change) => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    await axios.patch(\r\n      \"http://localhost:5000/api/cart\",\r\n      { itemId, quantity: change },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    // ... rest of your state update\r\n  } catch (error) {\r\n    console.error(\"Error updating quantity:\", error.response?.data || error.message);\r\n    setMessage(\"Failed to update item quantity.\");\r\n  }\r\n};\r\n\r\nconst handleRemoveItem = async (itemId) => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    await axios.delete(`http://localhost:5000/api/cart/${itemId}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    // ... rest of your state update\r\n  } catch (error) {\r\n    console.error(\"Error removing item:\", error.response?.data || error.message);\r\n    setMessage(\"Failed to remove item.\");\r\n  }\r\n};\r\n\r\nconst handleCheckout = async () => {\r\n  try {\r\n    if (!customerInfo.customerName || !customerInfo.customerAddress || !customerInfo.customerPhone) {\r\n      setMessage(\"Please fill out all the fields before proceeding to payment.\");\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    const orderToSave = {\r\n      customerName: customerInfo.customerName,\r\n      customerAddress: customerInfo.customerAddress,\r\n      customerPhone: customerInfo.customerPhone,\r\n    };\r\n\r\n    // Create order (backend now pulls cart automatically)\r\n    await axios.post(\"http://localhost:5000/api/orders\", orderToSave, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n\r\n    // Clear cart\r\n    await axios.delete(\"http://localhost:5000/api/cart/clear\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n\r\n    setCart({ items: [], totalPrice: 0 });\r\n    setMessage(\"Payment successful! Redirecting to orders...\");\r\n    setCustomerInfo({ customerName: \"\", customerAddress: \"\", customerPhone: \"\" });\r\n\r\n    setTimeout(() => navigate(\"/orders\"), 4000);\r\n  } catch (error) {\r\n    console.error(\"Error during checkout:\", error.response?.data || error.message);\r\n    setMessage(\"Payment failed. Please try again.\");\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}